name: "Auto PR to Main"

on:
  push:
    branches:
      - dev

jobs:
  create-pr:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write

    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Create or Update Pull Request
        uses: peter-evans/create-pull-request@v7
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          branch: dev
          base: main
          title: "ğŸš€ Release: Merge dev into main"
          body: |
            ## ğŸ“¦ Automated Release PR

            This PR merges the latest changes from `dev` into `main`.

            ### ğŸ” What's Changed

            Review the commits below to see what will be included in this release.

            ### âœ… Checklist before merging

            - [ ] All tests pass
            - [ ] CHANGELOG.md is updated
            - [ ] Version number is bumped if needed
            - [ ] All features are documented
            - [ ] No breaking changes (or documented in release notes)

            ### ğŸš¦ Merge Instructions

            1. Review all changes carefully
            2. Ensure CI/CD passes
            3. Update the title with the actual version if releasing
            4. Convert from draft to ready when prepared
            5. Merge using **merge commit** (not squash)

            ---

            *This PR was automatically created by the Auto PR workflow*
          draft: true
          labels: |
            release
            automated
